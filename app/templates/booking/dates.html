<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Select Service</title>
</head>
<style>
    body {
        background-color: #1d1d1d;
        color: #fff;
    }

    svg {
        background-color: #343a40;
        padding: 5px;
        border-radius: 8px;
    }

    .container {
        margin-top: 10vh;
    }


    .navbar{
        display: flex;
        align-items: center;
        box-shadow: rgba(0, 0, 0, 0.25) 0 7px 15px 0;
    }

    .navbar h2{
        width: 70%;
    }

    .navbar .back-button{
        margin-left: 10px;
    }

    .back-button svg{
        height: 32px;
        width: 32px;
        fill: #0d6efd;
        box-shadow: rgba(0, 0, 0, 0.25) 1px 5px 15px 2px;
    }

    .form-label{
        font-size: 24px;
        font-weight: 600;
        width: 100%;
        text-align: center;
    }

    .form-control{
        font-size: 18px;
        font-weight: 500;
        text-align: center;
        color: #f8f8f8;
        box-shadow: rgba(0, 0, 0, 0.25) 0 5px 15px 0;
        background-color: #2f2f32;
        border: none;
        outline: none;
    }

    .form-control:focus{
        font-size: 18px;
        font-weight: 500;
        text-align: center;
        color: #f8f8f8;
        box-shadow: rgba(0, 0, 0, 0.25) 0 5px 15px 0;
        background-color: #2f2f32;
        border: none;
        outline: none;
    }

    .submit-button{
        margin-top: 15px;
        padding: 5px;
        width: 100%;
        border-radius: 6px;
        border: none;
        outline: none;
        font-size: 18px;
        font-weight: 500;
        background-color: #0060d0;
        box-shadow: rgba(0, 0, 0, 0.25) 0 5px 17px 0;
    }

    .submit-button:active{
        background-color: #2f2f32;
    }
</style>
<body>
<nav class="navbar">
    <a href="/book_record/services/{{ service_id }}" class="back-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
        </svg>
    </a>
    <h2>Выбрать Дату</h2>
</nav>
<div class="container" id="containerId">
    <div class="mb-3">
        <label class="form-label" for="idDateInput">Выберите дату записи</label>
        <input class="form-control" type="date" id="idDateInput" required>
        <button class="submit-button" id="submitButton">Выбрать дату</button>
    </div>
    <div class="mb-3" id="idTimeContainer"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script>
    async function selectDate(){
        let date = document.getElementById('idDateInput').value.trim();

        console.log(`Выбранная дата: ${date}`);

        function createSelectTime() {
            let container = document.getElementById('idTimeContainer');
            let but = document.createElement('button');

            but.textContent = "11.30";

            container.appendChild(but);
        }

        if (date){
            const payload = {
                content: date,
            }

            try{
                await fetch('/book_services/services/reserve/date', {
                    method: 'POST',
                    headers: {'Content-type': 'application-json'},
                    body: JSON.stringify(payload)
                });

                console.log("Дата записана")
                createSelectTime();

            } catch (e){
                console.log(e);
            }
        }
    }

    document.getElementById('submitButton').onclick = selectDate;
</script>
</body>
</html>